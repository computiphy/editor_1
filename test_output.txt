============================= test session starts =============================
platform win32 -- Python 3.11.0, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\joylo\AppData\Local\Programs\Python\Python311\python.exe
cachedir: .pytest_cache
rootdir: D:\studio\tools\vibecoding\editor_1\wedding_ai_pipeline
configfile: pyproject.toml
plugins: mock-3.15.1
collecting ... collected 71 items

tests/test_ai_layout.py::test_generates_correct_cell_count PASSED        [  1%]
tests/test_ai_layout.py::test_cells_within_bounds PASSED                 [  2%]
tests/test_ai_layout.py::test_no_overlapping_cells PASSED                [  4%]
tests/test_ai_layout.py::test_seed_reproducibility PASSED                [  5%]
tests/test_ai_layout.py::test_different_pages_differ PASSED              [  7%]
tests/test_ai_layout.py::test_elegant_has_more_whitespace PASSED         [  8%]
tests/test_ai_layout.py::test_all_styles_produce_valid_layouts PASSED    [  9%]
tests/test_ai_layout.py::test_variants_scored_differently PASSED         [ 11%]
tests/test_ai_layout.py::test_best_variant_selected PASSED               [ 12%]
tests/test_ai_layout.py::test_respects_aspect_ratios PASSED              [ 14%]
tests/test_ai_layout.py::test_engine_ai_mode PASSED                      [ 15%]
tests/test_album_layout.py::test_template_registry_loads_bundled PASSED  [ 16%]
tests/test_album_layout.py::test_template_registry_lookup_by_count PASSED [ 18%]
tests/test_album_layout.py::test_template_cells_normalized PASSED        [ 19%]
tests/test_album_layout.py::test_template_from_json_file PASSED          [ 21%]
tests/test_album_layout.py::test_dominant_color_extraction PASSED        [ 22%]
tests/test_album_layout.py::test_delta_e_same_color PASSED               [ 23%]
tests/test_album_layout.py::test_delta_e_different_colors PASSED         [ 25%]
tests/test_album_layout.py::test_background_selector_empty_dir PASSED    [ 26%]
tests/test_album_layout.py::test_background_selector_picks_closest PASSED [ 28%]
tests/test_album_layout.py::test_renderer_creates_jpeg PASSED            [ 29%]
tests/test_album_layout.py::test_renderer_with_background PASSED         [ 30%]
tests/test_album_layout.py::test_project_serialization_roundtrip PASSED  [ 32%]
tests/test_album_layout.py::test_engine_generates_album PASSED           [ 33%]
tests/test_album_layout.py::test_engine_auto_images_per_page PASSED      [ 35%]
tests/test_background_removal.py::test_background_remover_returns_rgba PASSED [ 36%]
tests/test_background_removal.py::test_background_remover_preserves_dimensions PASSED [ 38%]
tests/test_blur.py::test_blur_detector_low_variance_is_blurry PASSED     [ 39%]
tests/test_blur.py::test_blur_detector_high_variance_is_sharp PASSED     [ 40%]
tests/test_clustering.py::test_duplicate_clusterer_groups_same_images PASSED [ 42%]
tests/test_clustering.py::test_duplicate_clusterer_separates_different_images PASSED [ 43%]
tests/test_color.py::test_color_grading_lab_statistical PASSED           [ 45%]
tests/test_color.py::test_color_grading_cinematic_style PASSED           [ 46%]
tests/test_color.py::test_color_grading_pastel_style PASSED              [ 47%]
tests/test_color.py::test_color_grading_black_and_white PASSED           [ 49%]
tests/test_color.py::test_color_grading_strength_zero PASSED             [ 50%]
tests/test_color.py::test_all_presets_exist PASSED                       [ 52%]
tests/test_color.py::test_all_presets_run PASSED                         [ 53%]
tests/test_config.py::test_config_loads_valid_yaml PASSED                [ 54%]
tests/test_config.py::test_config_rejects_invalid_yaml PASSED            [ 56%]
tests/test_cropping.py::test_cropping_engine_square_crop PASSED          [ 57%]
tests/test_cropping.py::test_cropping_engine_story_crop PASSED           [ 59%]
tests/test_culling_engine.py::test_culling_engine_scores_image PASSED    [ 60%]
tests/test_face.py::test_face_analyzer_detects_no_faces PASSED           [ 61%]
tests/test_face.py::test_face_analyzer_detects_blink_mock PASSED         [ 63%]
tests/test_gpu.py::test_gpu_detection_returns_valid_string PASSED        [ 64%]
tests/test_gpu.py::test_gpu_detection_respects_manual_override PASSED    [ 66%]
tests/test_image_io.py::test_load_save_jpeg PASSED                       [ 67%]
tests/test_image_io.py::test_develop_raw_mock PASSED                     [ 69%]
tests/test_layout.py::test_layout_engine_generates_page PASSED           [ 70%]
tests/test_models.py::test_image_score_initialization PASSED             [ 71%]
tests/test_narrative.py::test_narrative_engine_clustering PASSED         [ 73%]
tests/test_pipeline.py::test_pipeline_runs_and_returns_result PASSED     [ 74%]
tests/test_pipeline.py::test_pipeline_add_step PASSED                    [ 76%]
tests/test_quality.py::test_quality_assessor_returns_scores PASSED       [ 77%]
tests/test_restoration.py::test_restoration_engine_initialization PASSED [ 78%]
tests/test_restoration.py::test_restoration_routing_logic PASSED         [ 80%]
tests/test_semantic_segmentation.py::test_segmenter_returns_all_masks PASSED [ 81%]
tests/test_semantic_segmentation.py::test_segmenter_masks_are_float PASSED [ 83%]
tests/test_semantic_segmentation.py::test_segmenter_detects_skin_tones PASSED [ 84%]
tests/test_semantic_segmentation.py::test_segmenter_detects_sky PASSED   [ 85%]
tests/test_semantic_segmentation.py::test_segmenter_detects_vegetation PASSED [ 87%]
tests/test_semantic_segmentation.py::test_segmenter_skin_priority PASSED [ 88%]
tests/test_semantic_segmentation.py::test_semantic_grading_modifies_image PASSED [ 90%]
tests/test_semantic_segmentation.py::test_semantic_grading_skin_warms_image PASSED [ 91%]
tests/test_semantic_segmentation.py::test_semantic_grading_vegetation_desaturates PASSED [ 92%]
tests/test_semantic_segmentation.py::test_semantic_grading_empty_masks_no_change PASSED [ 94%]
tests/test_semantic_segmentation.py::test_full_pipeline_with_segmentation PASSED [ 95%]
tests/test_tiling.py::test_tiler_splits_and_merges PASSED                [ 97%]
tests/test_watermark.py::test_watermark_placement_bottom_right PASSED    [ 98%]
tests/test_watermark.py::test_watermark_auto_placement PASSED            [100%]

======================= 71 passed in 121.43s (0:02:01) ========================
